(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74d47c4f"],{"04d1":function(e,t,n){var a=n("342f"),r=a.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},1276:function(e,t,n){"use strict";var a=n("2ba4"),r=n("c65b"),i=n("e330"),o=n("d784"),l=n("44e7"),u=n("825a"),s=n("1d80"),c=n("4840"),d=n("8aa5"),f=n("50c4"),h=n("577e"),g=n("dc4a"),m=n("4dae"),p=n("14c3"),b=n("9263"),v=n("9f7f"),y=n("d039"),w=v.UNSUPPORTED_Y,x=4294967295,D=Math.min,k=[].push,z=i(/./.exec),j=i(k),$=i("".slice),E=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));o("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=h(s(this)),o=void 0===n?x:n>>>0;if(0===o)return[];if(void 0===e)return[i];if(!l(e))return r(t,i,e,o);var u,c,d,f=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,g+"g");while(u=r(b,v,i)){if(c=v.lastIndex,c>p&&(j(f,$(i,p,u.index)),u.length>1&&u.index<i.length&&a(k,f,m(u,1)),d=u[0].length,p=c,f.length>=o))break;v.lastIndex===u.index&&v.lastIndex++}return p===i.length?!d&&z(v,"")||j(f,""):j(f,$(i,p)),f.length>o?m(f,0,o):f}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:r(t,this,e,n)}:t,[function(t,n){var a=s(this),o=void 0==t?void 0:g(t,e);return o?r(o,t,a,n):r(i,h(a),t,n)},function(e,a){var r=u(this),o=h(e),l=n(i,r,o,a,i!==t);if(l.done)return l.value;var s=c(r,RegExp),g=r.unicode,m=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(w?"g":"y"),b=new s(w?"^(?:"+r.source+")":r,m),v=void 0===a?x:a>>>0;if(0===v)return[];if(0===o.length)return null===p(b,o)?[o]:[];var y=0,k=0,z=[];while(k<o.length){b.lastIndex=w?0:k;var E,O=p(b,w?$(o,k):o);if(null===O||(E=D(f(b.lastIndex+(w?k:0)),o.length))===y)k=d(o,k,g);else{if(j(z,$(o,y,k)),z.length===v)return z;for(var F=1;F<=O.length-1;F++)if(j(z,O[F]),z.length===v)return z;k=y=E}}return j(z,$(o,y)),z}]}),!E,w)},"3fae":function(e,t,n){},"4e82":function(e,t,n){"use strict";var a=n("23e7"),r=n("e330"),i=n("59ed"),o=n("7b0b"),l=n("07fa"),u=n("577e"),s=n("d039"),c=n("addb"),d=n("a640"),f=n("04d1"),h=n("d998"),g=n("2d00"),m=n("512ce"),p=[],b=r(p.sort),v=r(p.push),y=s((function(){p.sort(void 0)})),w=s((function(){p.sort(null)})),x=d("sort"),D=!s((function(){if(g)return g<70;if(!(f&&f>3)){if(h)return!0;if(m)return m<603;var e,t,n,a,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(a=0;a<47;a++)p.push({k:t+a,v:n})}for(p.sort((function(e,t){return t.v-e.v})),a=0;a<p.length;a++)t=p[a].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),k=y||!w||!x||!D,z=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:u(t)>u(n)?1:-1}};a({target:"Array",proto:!0,forced:k},{sort:function(e){void 0!==e&&i(e);var t=o(this);if(D)return void 0===e?b(t):b(t,e);var n,a,r=[],u=l(t);for(a=0;a<u;a++)a in t&&v(r,t[a]);c(r,z(e)),n=r.length,a=0;while(a<n)t[a]=r[a++];while(a<u)delete t[a++];return t}})},"512ce":function(e,t,n){var a=n("342f"),r=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},7767:function(e,t,n){"use strict";n("3fae")},a15b:function(e,t,n){"use strict";var a=n("23e7"),r=n("e330"),i=n("44ad"),o=n("fc6a"),l=n("a640"),u=r([].join),s=i!=Object,c=l("join",",");a({target:"Array",proto:!0,forced:s||!c},{join:function(e){return u(o(this),void 0===e?",":e)}})},addb:function(e,t,n){var a=n("4dae"),r=Math.floor,i=function(e,t){var n=e.length,u=r(n/2);return n<8?o(e,t):l(e,i(a(e,0,u),t),i(a(e,u),t),t)},o=function(e,t){var n,a,r=e.length,i=1;while(i<r){a=i,n=e[i];while(a&&t(e[a-1],n)>0)e[a]=e[--a];a!==i++&&(e[a]=n)}return e},l=function(e,t,n,a){var r=t.length,i=n.length,o=0,l=0;while(o<r||l<i)e[o+l]=o<r&&l<i?a(t[o],n[l])<=0?t[o++]:n[l++]:o<r?t[o++]:n[l++];return e};e.exports=i},c466:function(e,t,n){"use strict";function a(e){return e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return e.getFullYear()==t.getFullYear()}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"year",a=new Date(e),r=new Date(t);return"year"===n?r.getFullYear()-a.getFullYear():"month"===n?12*(r.getFullYear()-a.getFullYear())+(r.getMonth()-a.getMonth()):"day"===n?365*(r.getFullYear()-a.getFullYear())+30*(r.getMonth()-a.getMonth())+(r.getDate()-a.getDate()):void 0}n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u}));var l=new Date,u=new Date(l.getFullYear(),l.getMonth(),l.getDate())},d998:function(e,t,n){var a=n("342f");e.exports=/MSIE|Trident/.test(a)},dad6:function(e,t,n){"use strict";n("faa1")},e382:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("user-table",{attrs:{"table-data":e.tableData,columns:e.columns,loading:e.loading},on:{edit:e.editRow}}),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizesWithAll,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum,background:""},on:{"size-change":e.sizeChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),n("user-edit",{attrs:{visible:e.showEdit,"form-data":e.editForm},on:{"update:visible":function(t){e.showEdit=t},submit:e.updateUserInfo}})],1)},r=[],i=n("5530"),o=n("b85c"),l=(n("fb6a"),n("4e82"),n("b64b"),n("99af"),n("c740"),n("a434"),n("d81d"),n("b775"));function u(){return Object(l["a"])({url:"/user/list",method:"get"})}function s(e){return Object(l["a"])({url:"/user/update",method:"post",data:e})}var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,height:"610",border:"",stripe:""}},[e._l(e.columns,(function(e){return n("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,width:e.width,sortable:"age"===e.id}})})),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.$emit("edit",t.row,t.$index,e.tableData)}}},[e._v("编辑")])]}}])})],2)},d=[],f={name:"user-table",props:{tableData:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}}},h=f,g=n("2877"),m=Object(g["a"])(h,c,d,!1,null,null,null),p=m.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"",visible:e.visible,width:"40%"},on:{close:function(t){return e.$emit("update:visible",!1)}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",inline:!1,size:"normal"}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"生日",size:"normal",required:""}},[n("el-col",{attrs:{span:11,offset:0}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",size:"normal",placeholder:"选择日期时间"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),n("el-col",{attrs:{span:13,offset:0}})],1),n("el-form-item",{attrs:{label:"地址",size:"normal",required:""}},[n("el-col",{attrs:{span:12,offset:0}},[n("regions-picker",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),n("el-form-item",{attrs:{label:"电话",size:"normal",prop:"phone"}},[n("el-input",{attrs:{size:"normal",clearable:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),n("el-form-item",{attrs:{label:"邮箱",size:"normal",prop:"email"}},[n("el-input",{attrs:{size:"normal",clearable:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)},v=[],y=(n("ac1f"),n("00b4"),n("d9e2"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-cascader",{ref:"cascader",attrs:{options:e.options,value:e.regionsId,placeholder:"请选择"},on:{change:e.handelChange}})}),w=[],x=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("1276"),n("159b"),n("a15b"),n("7db0"),{name:"regions-picker",data:function(){return{options:[],province:[],city:[],county:[]}},created:function(){var e=this;Promise.all([n.e("chunk-2d0c20e8").then(n.bind(null,"494a")),n.e("chunk-2d0c57a4").then(n.bind(null,"3eea")),n.e("chunk-2d0d03eb").then(n.bind(null,"66c8"))]).then((function(t){e.province=t[0].province,e.city=t[1].city,e.county=t[2].county,e.options=t[0].province.map((function(e){return{value:e.id,label:e.name,children:t[1].city[e.id].map((function(e){var n={value:e.id,label:e.name};return t[2].county[e.id]&&(n.children=t[2].county[e.id].map((function(e){return{value:e.id,label:e.name}}))),n}))}}))}))},model:{props:"value",event:"change"},props:{value:{type:String,default:""}},computed:{regionsId:function(){return this.getResgionsByName(this.value.split(" "))}},methods:{handelChange:function(e){this.$emit("change",this.getRegionsById(e))},getRegionsById:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(a,r){if(0===r)n.push(e.city[a][0].province);else if(1===r)n.push(e.county[a][0].city);else if(2===r){var i,l=e.county[t[1]],u=Object(o["a"])(l);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s.id===a){n.push(s.name);break}}}catch(c){u.e(c)}finally{u.f()}}})),n.join(" ")},getResgionsByName:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t,a){if(0===a){var r,i=null===(r=e.province)||void 0===r?void 0:r.find((function(e){return e.name===t}));i&&n.push(i.id)}else if(1===a){var o,l=null===(o=e.city[n[0]])||void 0===o?void 0:o.find((function(e){return e.name===t}));l&&n.push(l.id)}else if(2===a){var u,s=null===(u=e.county[n[1]])||void 0===u?void 0:u.find((function(e){return e.name===t}));s&&n.push(s.id)}})),n}}}),D=x,k=(n("7767"),Object(g["a"])(D,y,w,!1,null,"91f27a24",null)),z=k.exports,j=n("61f7"),$={name:"user-edit",components:{RegionsPicker:z},props:{visible:{type:Boolean,default:!1},formData:{type:Object,default:function(){return{}}}},data:function(){var e=function(e,t,n){/^1[3456789]\d{9}$/.test(t)?n():n(new Error("手机号码格式错误"))},t=function(e,t,n){/^[A-Za-z0-9]+([_\.][A-Za-z0-9]+)*@([A-Za-z0-9\-]+\.)+[A-Za-z]{2,6}$/.test(t)?n():n(new Error("邮箱格式错误"))};return{form:{name:"",birthday:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:e,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:t,trigger:"blur"}]}}},watch:{visible:function(e){e&&(this.form=Object.assign({},this.formData))}},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){return t?Object(j["b"])(e.form,e.formData)?e.$message.error("没有任何修改"):void e.$emit("submit",e.form):(console.log("error submit!!"),!1)}))}}},E=$,O=Object(g["a"])(E,b,v,!1,null,null,null),F=O.exports,M=n("c466"),A={name:"User",components:{UserTable:p,UserEdit:F},data:function(){return{totalData:[],loading:!0,pageSize:10,pageSizes:[5,10,20,50],currentPage:1,showEdit:!1,editForm:{}}},created:function(){this.columnsMap={date:"日期",name:"姓名",address:"地址",age:"年龄",birthday:"生日",phone:"电话",email:"邮箱"},this.today=new Date,this.getData()},computed:{tableData:function(){return this.totalData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},columns:function(){if(0===this.tableData.length)return[];var e,t=[],n=["id","name","address","age","birthday","phone","email"],a=Object(o["a"])(Object.keys(this.tableData[0]).sort((function(e,t){return n.indexOf(e)-n.indexOf(t)})));try{for(a.s();!(e=a.n()).done;){var r=e.value;t.push({id:r,label:this.columnsMap[r]||r})}}catch(i){a.e(i)}finally{a.f()}return t},totalNum:function(){return this.totalData.length},pageSizesWithAll:function(){return this.pageSizes.concat(this.totalNum)}},methods:{sizeChange:function(e){this.pageSize=e!==e?this.totalNum:e,this.currentPage=1},editRow:function(e,t,n){this.editForm=Object(i["a"])({},e),this.showEdit=!0},updateUserInfo:function(e){var t=this;s(e).then((function(e){if(0===e.data.code){var n=e.data.data;n.age=Object(M["a"])(n.birthday,t.today);var a=e.data.data.id,r=t.totalData.findIndex((function(e){return e.id===a}));t.totalData.splice(r,1,e.data.data),t.$message.success("修改成功"),t.showEdit=!1}else t.$message.error(e.msg)}))},getData:function(){var e=this;u().then((function(t){e.totalData=(t.data.data||[]).map((function(t){return t.age=Object(M["a"])(t.birthday,e.today),t})),e.loading=!1}))}}},I=A,S=(n("dad6"),Object(g["a"])(I,a,r,!1,null,"3819b33d",null));t["default"]=S.exports},faa1:function(e,t,n){}}]);
//# sourceMappingURL=chunk-74d47c4f.ea847f45.js.map